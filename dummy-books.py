import psycopg2
from datetime import datetime

# Настройки за свързване с базата
DB_NAME = "bookshop"
DB_USER = "postgres"
DB_PASSWORD = "jafar"
DB_HOST = "localhost"
DB_PORT = "5432"

# Данни за книгите (20 класики)
books = [
    ("Братя Карамазови", "Братья Карамазовы", "Колибри", "Григор Василев", 960, 29.99, "hardcover", "Български", 800, "210x150x50 мм", "9789545275807", "Епичен роман на Фьодор Достоевски.", 50),
    ("Дон Кихот", "Don Quijote de la Mancha", "Фама", "Веселин Ханчев", 1056, 34.90, "hardcover", "Български", 850, "240x170x55 мм", "9789545975868", "Романът на Сервантес за рицаря на печалния образ.", 40),
    ("1984", "Nineteen Eighty-Four", "Сиела", "Борислав Сарафов", 368, 18.99, "paperback", "Български", 420, "200x130x25 мм", "9789542836634", "Антиутопия на Джордж Оруел.", 100),
    ("Одисея", "Ὀδύσσεια", "Изток-Запад", "Георги Батаклиев", 600, 22.50, "hardcover", "Български", 700, "220x160x35 мм", "9789543213045", "Епическата поема на Омир.", 60),
    ("Илиада", "Ἰλιάς", "Изток-Запад", "Георги Батаклиев", 544, 21.99, "hardcover", "Български", 750, "220x160x30 мм", "9789543213038", "Епичен разказ за Троянската война.", 55),
    ("Гордост и предразсъдъци", "Pride and Prejudice", "Хермес", "Александра Костова", 432, 16.99, "paperback", "Български", 400, "200x130x20 мм", "9789542618261", "Роман на Джейн Остин.", 70),
    ("Великият Гетсби", "The Great Gatsby", "Фама", "Иван Велчев", 240, 14.99, "paperback", "Български", 350, "190x120x15 мм", "9789545975705", "Роман за Американската мечта.", 90),
    ("Метаморфозата", "Die Verwandlung", "Колибри", "Веселин Райков", 144, 12.99, "paperback", "Български", 300, "180x120x10 мм", "9789545272003", "Разказът на Франц Кафка.", 65),
    ("Животинската ферма", "Animal Farm", "Хермес", "Иван Генов", 176, 13.99, "paperback", "Български", 320, "180x120x12 мм", "9789544598296", "Алегорична сатира на Оруел.", 85),
    ("Моби Дик", "Moby-Dick", "Бард", "Петър Крумов", 720, 27.50, "hardcover", "Български", 900, "230x160x45 мм", "9789545853417", "История за капитан Ахав и белия кит.", 30),
    ("Тримата мускетари", "Les Trois Mousquetaires", "Сиела", "Иван Стефанов", 608, 24.90, "hardcover", "Български", 820, "220x150x35 мм", "9789542825325", "Романът на Александър Дюма.", 40),
    ("Анна Каренина", "Анна Каренина", "Колибри", "Милена Попова", 864, 32.99, "hardcover", "Български", 900, "240x160x45 мм", "9789545296467", "Романът на Лев Толстой.", 35),
    ("Червено и черно", "Le Rouge et le Noir", "Изток-Запад", "Петър Симеонов", 512, 19.99, "paperback", "Български", 650, "200x140x25 мм", "9789543216740", "Романът на Стендал.", 50),
    ("Фауст", "Faust", "Сиела", "Стефан Георгиев", 400, 18.99, "hardcover", "Български", 600, "210x140x30 мм", "9789542836450", "Поемата на Гьоте.", 45),
    ("Разкази", "Selected Stories", "Хермес", "Георги Димитров", 320, 15.99, "paperback", "Български", 500, "190x130x20 мм", "9789544598754", "Разкази на Едгар Алън По.", 70)
]

# Свързване с базата
try:
    conn = psycopg2.connect(
        dbname=DB_NAME, user=DB_USER, password=DB_PASSWORD, host=DB_HOST, port=DB_PORT
    )
    cur = conn.cursor()

    # SQL заявка за вмъкване на книги
    sql = """
    INSERT INTO books (
        title,
        original_title,
        publisher,
        translator,
        pages,
        price,
        cover_type,
        language,
        weight,
        dimensions,
        isbn,
        description,
        stock_count,
        created_at,
        updated_at
    ) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)
    """

    # Добавяне на книгите в базата
    for book in books:
        cur.execute(sql, book + (datetime.now(), datetime.now()))

    # Потвърждение на заявките
    conn.commit()
    print("✅ Успешно добавени 20 книги в базата!")

except Exception as e:
    print(f"❌ Грешка при вмъкване в базата: {e}")

finally:
    # Затваряне на връзката
    if conn:
        cur.close()
        conn.close()
